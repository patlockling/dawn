{% style %}
.non-spaced-section {
  margin-bottom: -5rem;
}
{% endstyle %}

{% assign collectionDescriptionParts = collection.description | split: '<p>' %}

<div class="{%- if section.settings.has_sections_below -%}non-spaced-section{% endif %}">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Restaurant",
    "name": "{{ collection.title }}",
    "description": "{{ collectionDescriptionParts[1] | strip_html }}",
    "hasMenu": "{{ shop.url | append: collection.url }}"
  }
  </script>
</div>

{% schema %}
  {
    "name": "t:sections.main-collection-structured-data.name",
    "settings": [
      {
        "type": "checkbox",
        "id": "has_sections_below",
        "default": false,
        "label": "t:sections.main-collection-structured-data.settings.has_sections_below.label"
      }
	]
  }
{% endschema %}
